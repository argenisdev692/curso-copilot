<div class="p-6">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">
      ¡Bienvenido, {{ currentUser()?.firstName || 'Usuario' }}!
    </h1>
    <p class="mt-2 text-gray-600">Aquí tienes un resumen de tu actividad</p>
  </div>

  @if (isLoading()) {
    <div class="flex items-center justify-center py-12">
      <mat-spinner diameter="48"></mat-spinner>
    </div>
  } @else {
    <!-- Stats Cards -->
    <div class="mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4">
      <mat-card class="bg-blue-50">
        <mat-card-content class="flex items-center gap-4 p-4">
          <div class="rounded-full bg-blue-500 p-3">
            <mat-icon class="text-white">meeting_room</mat-icon>
          </div>
          <div>
            <p class="text-sm text-gray-600">Total Salas</p>
            <p class="text-2xl font-bold text-gray-900">{{ stats().totalRooms }}</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="bg-green-50">
        <mat-card-content class="flex items-center gap-4 p-4">
          <div class="rounded-full bg-green-500 p-3">
            <mat-icon class="text-white">check_circle</mat-icon>
          </div>
          <div>
            <p class="text-sm text-gray-600">Disponibles</p>
            <p class="text-2xl font-bold text-gray-900">{{ stats().availableRooms }}</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="bg-purple-50">
        <mat-card-content class="flex items-center gap-4 p-4">
          <div class="rounded-full bg-purple-500 p-3">
            <mat-icon class="text-white">event</mat-icon>
          </div>
          <div>
            <p class="text-sm text-gray-600">Mis Reservas</p>
            <p class="text-2xl font-bold text-gray-900">{{ stats().myBookings }}</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="bg-orange-50">
        <mat-card-content class="flex items-center gap-4 p-4">
          <div class="rounded-full bg-orange-500 p-3">
            <mat-icon class="text-white">schedule</mat-icon>
          </div>
          <div>
            <p class="text-sm text-gray-600">Próximas</p>
            <p class="text-2xl font-bold text-gray-900">{{ stats().upcomingBookings }}</p>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Quick Actions -->
    <div class="mb-8">
      <h2 class="mb-4 text-xl font-semibold text-gray-900">Acciones Rápidas</h2>
      <div class="flex flex-wrap gap-4">
        <button mat-raised-button color="primary" routerLink="/rooms">
          <mat-icon>add</mat-icon>
          Nueva Reserva
        </button>
        <button mat-stroked-button routerLink="/my-bookings">
          <mat-icon>list</mat-icon>
          Ver Mis Reservas
        </button>
        <button mat-stroked-button routerLink="/bookings">
          <mat-icon>calendar_today</mat-icon>
          Calendario
        </button>
      </div>
    </div>

    <!-- Content Grid -->
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
      <!-- Upcoming Bookings -->
      <mat-card>
        <mat-card-header>
          <mat-card-title>Próximas Reservas</mat-card-title>
        </mat-card-header>
        <mat-card-content class="p-4">
          @if (upcomingBookings().length === 0) {
            <p class="py-4 text-center text-gray-500">No tienes reservas próximas</p>
          } @else {
            <div class="space-y-3">
              @for (booking of upcomingBookings(); track booking.id) {
                <div class="flex items-center justify-between rounded-lg bg-gray-50 p-3">
                  <div>
                    <p class="font-medium text-gray-900">{{ booking.roomName }}</p>
                    <p class="text-sm text-gray-500">
                      {{ booking.startTime | date: 'dd/MM/yyyy HH:mm' }}
                    </p>
                  </div>
                  <mat-icon class="text-primary-500">event</mat-icon>
                </div>
              }
            </div>
          }
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" routerLink="/my-bookings">Ver todas</button>
        </mat-card-actions>
      </mat-card>

      <!-- Available Rooms -->
      <mat-card>
        <mat-card-header>
          <mat-card-title>Salas Disponibles</mat-card-title>
        </mat-card-header>
        <mat-card-content class="p-4">
          @if (availableRooms().length === 0) {
            <p class="py-4 text-center text-gray-500">No hay salas disponibles</p>
          } @else {
            <div class="space-y-3">
              @for (room of availableRooms(); track room.id) {
                <div class="flex items-center justify-between rounded-lg bg-gray-50 p-3">
                  <div>
                    <p class="font-medium text-gray-900">{{ room.name }}</p>
                    <p class="text-sm text-gray-500">Capacidad: {{ room.capacity }} personas</p>
                  </div>
                  <button mat-icon-button color="primary" routerLink="/rooms">
                    <mat-icon>arrow_forward</mat-icon>
                  </button>
                </div>
              }
            </div>
          }
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" routerLink="/rooms">Ver todas</button>
        </mat-card-actions>
      </mat-card>
    </div>
  }
</div>
