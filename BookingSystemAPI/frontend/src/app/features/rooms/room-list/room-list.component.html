<div class="p-6">
  <!-- Header -->
  <div class="mb-6 flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-bold text-gray-900">Salas Disponibles</h1>
      <p class="text-gray-600">Selecciona una sala para hacer tu reserva</p>
    </div>
    <button mat-raised-button color="primary" (click)="loadRooms()">
      <mat-icon>refresh</mat-icon>
      Actualizar
    </button>
  </div>

  @if (isLoading()) {
    <div class="flex items-center justify-center py-12">
      <mat-spinner diameter="48"></mat-spinner>
    </div>
  } @else if (error()) {
    <div class="rounded-lg bg-red-50 p-6 text-center">
      <mat-icon class="mb-2 text-red-500" style="font-size: 48px; width: 48px; height: 48px"
        >error</mat-icon
      >
      <p class="text-red-700">{{ error() }}</p>
      <button mat-raised-button color="primary" class="mt-4" (click)="loadRooms()">
        Reintentar
      </button>
    </div>
  } @else if (rooms().length === 0) {
    <div class="rounded-lg bg-gray-50 p-6 text-center">
      <mat-icon class="mb-2 text-gray-400" style="font-size: 48px; width: 48px; height: 48px"
        >meeting_room</mat-icon
      >
      <p class="text-gray-600">No hay salas disponibles en este momento</p>
    </div>
  } @else {
    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
      @for (room of rooms(); track room.id) {
        <mat-card class="transition-shadow hover:shadow-lg">
          <mat-card-header>
            <mat-icon mat-card-avatar class="text-primary-500">meeting_room</mat-icon>
            <mat-card-title>{{ room.name }}</mat-card-title>
            <mat-card-subtitle>
              <mat-chip-set>
                @if (room.status === 'Available') {
                  <mat-chip class="bg-green-100 text-green-800">Disponible</mat-chip>
                } @else if (room.status === 'Maintenance') {
                  <mat-chip class="bg-yellow-100 text-yellow-800">Mantenimiento</mat-chip>
                } @else {
                  <mat-chip class="bg-red-100 text-red-800">Ocupada</mat-chip>
                }
              </mat-chip-set>
            </mat-card-subtitle>
          </mat-card-header>

          <mat-card-content class="p-4">
            <div class="space-y-2">
              <div class="flex items-center gap-2 text-sm text-gray-500">
                <mat-icon class="text-gray-400">people</mat-icon>
                <span>Capacidad: {{ room.capacity }} personas</span>
              </div>
              <div class="flex items-center gap-2 text-sm text-gray-500">
                <mat-icon class="text-gray-400">location_on</mat-icon>
                <span>{{ room.location || 'Sin ubicaci√≥n' }}</span>
              </div>
            </div>

            @if (room.equipment && room.equipment.length > 0) {
              <div class="mt-4">
                <p class="mb-2 text-sm font-medium text-gray-700">Equipamiento:</p>
                <div class="flex flex-wrap gap-1">
                  @for (item of room.equipment; track item) {
                    <span class="rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-600">
                      {{ item }}
                    </span>
                  }
                </div>
              </div>
            }
          </mat-card-content>

          <mat-card-actions class="justify-end">
            <button
              mat-raised-button
              color="primary"
              [disabled]="room.status !== 'Available'"
              (click)="openBookingDialog(room)"
            >
              <mat-icon>event</mat-icon>
              Reservar
            </button>
          </mat-card-actions>
        </mat-card>
      }
    </div>
  }
</div>
